 req←Handler req;gui;evt;data;en;msg;opts;os;as;script;nl;number;message;filename;dir;id;FileName
 (gui evt id data en msg)←req
 :Trap 0
     opts←0 ⎕JSON data
     os←opts.⎕NL ¯2 ⋄ as←##.ahk_shifts.⎕NL ¯2   ⍝ Turn shifting key options into a list of shifts
     opts.shifts←os∩as
     (number expression)←BuildSaveScript opts		 
 :Else
     nl←⎕UCS 10
     (number expression)←⎕DMX.(EN DM)
     expression←1↓∊nl∘,¨expression
 :EndTrap
 id∘Send 1 ⎕JSON(number message)
