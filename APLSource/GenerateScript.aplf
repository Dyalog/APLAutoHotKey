 GenerateScript←{
⍝ ⍵ ←→ options JSON namespace. All members (1≥≢⍴)
⍝ ⍵.layout    ←→ (1=≡)(char) :: path to .tsv file which maps ASCII glyphs to APL glyphs
⍝ ⍵.shifts    ←→ (2=≡)(char) :: shifting key(s)
⍝ ⍵.prefixes  ←→ (1≥≡)(char) :: prefix key(s)

     map←keymaps⍎⍵.layout
     script←'user_suspend := False',⎕UCS 10

     Alt←('Alt'ReplaceForBoth'LAlt' 'RAlt')
     Ctrl←('Ctrl'ReplaceForBoth'LCtrl' 'RCtrl')
     AltGr←('AltGr'⎕R'RAlt')

     shifts←Alt Ctrl AltGr ⍵.shifts
     script,←⊃,/HotKey∘map¨⊆shifts

     script,←AddGroups LocateClassicExes ⍬
     script,←Suspend ⍵

     script

⍝ TODO
⍝ \ → VKDC
⍝ Win
⍝ AltGr + CapsLock bugs
⍝    Caps+Shift+x leaves Caps on
⍝ Ignore space! CapsLock+Space
 }
